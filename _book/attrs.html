<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>DiagrammeR Documentation</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This book provides a wealth of information about the DiagrammeR package for R.">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="DiagrammeR Documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides a wealth of information about the DiagrammeR package for R." />
  <meta name="github-repo" content="rich-iannone/DiagrammeR-docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="DiagrammeR Documentation" />
  
  <meta name="twitter:description" content="This book provides a wealth of information about the DiagrammeR package for R." />
  

<meta name="author" content="Richard Iannone">


<meta name="date" content="2017-02-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="creation.html">


<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<script src="libs/viz-0.3/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-0.9.1/grViz.js"></script>
<link href="libs/vis-4.17.0/vis.css" rel="stylesheet" />
<script src="libs/vis-4.17.0/vis.min.js"></script>
<script src="libs/visNetwork-binding-1.0.3/visNetwork.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The DiagrammeR Docs</a></li>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="creation.html"><a href="creation.html"><i class="fa fa-check"></i><b>2</b> Graph Creation</a><ul>
<li class="chapter" data-level="2.1" data-path="creation.html"><a href="creation.html#getting-started"><i class="fa fa-check"></i><b>2.1</b> Getting Started</a></li>
<li class="chapter" data-level="2.2" data-path="creation.html"><a href="creation.html#creating-a-graph-object-and-adding-nodes-and-edges"><i class="fa fa-check"></i><b>2.2</b> Creating a Graph Object and Adding Nodes and Edges</a></li>
<li class="chapter" data-level="2.3" data-path="creation.html"><a href="creation.html#creating-a-simple-graph-using-data-frames"><i class="fa fa-check"></i><b>2.3</b> Creating a Simple Graph Using Data Frames</a></li>
<li class="chapter" data-level="2.4" data-path="creation.html"><a href="creation.html#moving-toward-nodes-and-edges-with-more-descriptive-attributes"><i class="fa fa-check"></i><b>2.4</b> Moving Toward Nodes and Edges with More Descriptive Attributes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="attrs.html"><a href="attrs.html"><i class="fa fa-check"></i><b>3</b> Graph Attributes</a><ul>
<li class="chapter" data-level="3.1" data-path="attrs.html"><a href="attrs.html#adding-attributes-in-ndfs-and-edfs-outside-of-a-graph"><i class="fa fa-check"></i><b>3.1</b> Adding Attributes in NDFs and EDFs Outside of a Graph</a></li>
<li class="chapter" data-level="3.2" data-path="attrs.html"><a href="attrs.html#adding-attributes-to-nodes-or-edges-already-in-the-graph"><i class="fa fa-check"></i><b>3.2</b> Adding Attributes to Nodes or Edges Already in the Graph</a></li>
<li class="chapter" data-level="3.3" data-path="attrs.html"><a href="attrs.html#setting-attributes-globally-or-selectively"><i class="fa fa-check"></i><b>3.3</b> Setting Attributes Globally or Selectively</a></li>
<li class="chapter" data-level="3.4" data-path="attrs.html"><a href="attrs.html#adding-attributes-to-selections-of-nodes-or-edges"><i class="fa fa-check"></i><b>3.4</b> Adding Attributes to Selections of Nodes or Edges</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DiagrammeR Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="attrs" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Graph Attributes</h1>
<p>A graph can often convey more useful information when aesthetic properties are applied to its rendered form.</p>
<div id="adding-attributes-in-ndfs-and-edfs-outside-of-a-graph" class="section level2">
<h2><span class="header-section-number">3.1</span> Adding Attributes in NDFs and EDFs Outside of a Graph</h2>
<p>One way to add node or edge attributes, using the functions weâ€™ve already explored, is to include the these attributes and their values when generating node and edge data frames. For a node data frame, we can provide our own argument names and values when calling the <code>create_node_df()</code> function. In the example below, we provide values for <code>n</code> (the number of nodes, <code>4</code> in this case), <code>label</code>, and <code>type</code> but, in addition, we add the columns: <code>color</code>, <code>shape</code>, and <code>data</code>. Note that we either provide a single-length vector (i.e., a single value) or an <em>n</em>-length vector. Anything in between results in <code>NA</code> values applied to fill in the length of the data frame. The <code>color</code> and <code>shape</code> node attributes are instantly recognized by the <strong>Graphviz</strong> rendering engine. (Having the correct types of values are important here, more on that later.) The <code>data</code> column is ignored by the rendering engine, however, it is useful to have for other reasons (more on this later, as well).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a node data frame and display it</span>
ndf &lt;-
<span class="st">  </span><span class="kw">create_node_df</span>(
    <span class="dt">n =</span> <span class="dv">4</span>,
    <span class="dt">label =</span> <span class="ot">TRUE</span>,
    <span class="dt">type =</span> <span class="st">&quot;lower&quot;</span>,
    <span class="dt">color =</span> <span class="st">&quot;lightgreen&quot;</span>,
    <span class="dt">shape =</span> <span class="kw">c</span>(<span class="st">&quot;circle&quot;</span>, <span class="st">&quot;circle&quot;</span>,
              <span class="st">&quot;rectangle&quot;</span>, <span class="st">&quot;rectangle&quot;</span>),
    <span class="dt">data =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="fl">5.6</span>, <span class="fl">7.4</span>, <span class="fl">1.7</span>))

ndf</code></pre></div>
<pre><code>##   id  type label      color     shape data
## 1  1 lower     1 lightgreen    circle  2.5
## 2  2 lower     2 lightgreen    circle  5.6
## 3  3 lower     3 lightgreen rectangle  7.4
## 4  4 lower     4 lightgreen rectangle  1.7</code></pre>
<p>We can include this node data frame in a new graph and then render it using the Graphviz engine (using <code>render_graph()</code> with no arguments except <code>graph</code>). Letâ€™s have a look.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Incorporate the node data frame into a</span>
<span class="co"># new graph and display that graph; note that</span>
<span class="co"># there are styling attributes being used</span>
graph_4n &lt;-
<span class="st">  </span><span class="kw">create_graph</span>(
    <span class="dt">nodes_df =</span> ndf)

<span class="kw">render_graph</span>(graph_4n)</code></pre></div>
<div id="htmlwidget-3cb184d1620d430b9c1e" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-3cb184d1620d430b9c1e">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<p>We can take a very similar approach to adding styling attributes and a data column to an edge data frame with the <code>create_edge_df()</code> function. Here, letâ€™s add the <code>penwidth</code> (line thicknesses for edges) and the <code>color</code> sytling attributes, and, a <code>data</code> attribute column.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create e node data frame and display it</span>
edf &lt;-
<span class="st">  </span><span class="kw">create_edge_df</span>(
    <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>),
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>),
    <span class="dt">rel =</span> <span class="st">&quot;related_to&quot;</span>,
    <span class="dt">penwidth =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span>),
    <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">&quot;pink&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;lightblue&quot;</span>),
    <span class="dt">data =</span> <span class="kw">c</span>(<span class="fl">1.1</span>, <span class="fl">5.2</span>, <span class="fl">3.4</span>))

edf</code></pre></div>
<pre><code>##   id from to        rel penwidth     color data
## 1  1    1  2 related_to      2.5      pink  1.1
## 2  2    4  1 related_to      0.5       red  5.2
## 3  3    3  1 related_to      1.0 lightblue  3.4</code></pre>
<p>Now that we have the edge data frame (<code>edf</code>), letâ€™s <em>add</em> that to the graph with the <code>add_edge_df()</code> function. Then, render the graph to see the styled nodes and edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Add the edge data frame to the graph</span>
<span class="co"># object, then, render the graph</span>
graph_4n_3e &lt;-
<span class="st">  </span>graph_4n %&gt;%
<span class="st">  </span><span class="kw">add_edge_df</span>(
    <span class="dt">edge_df =</span> edf)

<span class="kw">render_graph</span>(graph_4n_3e)</code></pre></div>
<div id="htmlwidget-6b817794ff2098abb127" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-6b817794ff2098abb127">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="adding-attributes-to-nodes-or-edges-already-in-the-graph" class="section level2">
<h2><span class="header-section-number">3.2</span> Adding Attributes to Nodes or Edges Already in the Graph</h2>
<p>We can use the <code>data</code> fields for both the nodes and the edges to create styling attributes. Doing this generally requires scaling of the values (if they are numerical data, and they are in this case) and generating a new column in the internal ndf or edf thatâ€™s named for the styling attribute. Thankfully, we have some useful functions to help with this: <code>rescale_node_attrs()</code> and <code>rescale_edge_attrs()</code>. Letâ€™s look at an example of how this works for scaling up the sizes of the node shape:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create the `width` node attribute column</span>
<span class="co"># by scaling the values in the `data` column</span>
<span class="co"># to between 0.5 and 1.5 units</span>
graph_scaled_nodes &lt;-
<span class="st">  </span>graph_4n_3e %&gt;%
<span class="st">    </span><span class="kw">rescale_node_attrs</span>(
      <span class="dt">node_attr_from =</span> <span class="st">&quot;data&quot;</span>,
      <span class="dt">to_lower_bound =</span> <span class="fl">0.5</span>,
      <span class="dt">to_upper_bound =</span> <span class="fl">1.5</span>,
      <span class="dt">node_attr_to =</span> <span class="st">&quot;width&quot;</span>)

<span class="co"># Display the graph with the new styling</span>
<span class="co"># attribute applied</span>
<span class="kw">render_graph</span>(graph_scaled_nodes)</code></pre></div>
<div id="htmlwidget-6c0e59fa59f7eabfe937" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-6c0e59fa59f7eabfe937">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<p>This looks pretty good and, conceptually, it isnâ€™t too difficult to reason about generating new columns with specific attribute names based on data in existing columns. Notice that the circular nodes were scaled up or down evenly whereas the rectangular one was only scaled horizontally (and this makes sense, we made a <code>width</code> attribute/column). If we wanted scaling both in <code>width</code> and in <code>height</code>, we also need a height column with the same scaled values. There is a set of functions to make this process easier: <code>copy_node_attrs()</code> and <code>copy_edge_attrs()</code>. It simply copies values from one attribute to a new attribute.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Copy the `width` attribute values to</span>
<span class="co"># a new `height` attribute; because we</span>
<span class="co"># want square rectangles</span>
graph_square_rects &lt;-
<span class="st">  </span>graph_scaled_nodes %&gt;%
<span class="st">    </span><span class="kw">copy_node_attrs</span>(
      <span class="dt">node_attr_from =</span> <span class="st">&quot;width&quot;</span>,
      <span class="dt">node_attr_to =</span> <span class="st">&quot;height&quot;</span>)

<span class="co"># Display the graph and observe squares</span>
<span class="kw">render_graph</span>(graph_square_rects)</code></pre></div>
<div id="htmlwidget-86d5b8108567a037d227" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-86d5b8108567a037d227">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\", height = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\", height = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\", height = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\", height = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"pink\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"red\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"lightblue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<p>Letâ€™s move onto some modifications of the edges. We have already applied some color values manually when constructing the edge data frame before its incorporation into the graph. Letâ€™s use the <code>data</code> values available in the internal edge data frame to create scaled colors. Weâ€™ll essentially replace the <code>color</code> attribute values already present and scale between the <code>grey85</code> and <code>grey25</code> colors with the <code>rescale_edge_attrs()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create the `color` edge attribute column</span>
<span class="co"># by scaling the values in the `data` column</span>
<span class="co"># to between the `grey85` to `grey25` colors</span>
graph_grey_edges &lt;-
<span class="st">  </span>graph_square_rects %&gt;%
<span class="st">    </span><span class="kw">rescale_edge_attrs</span>(
      <span class="dt">edge_attr_from =</span> <span class="st">&quot;data&quot;</span>,
      <span class="dt">to_lower_bound =</span> <span class="st">&quot;grey85&quot;</span>,
      <span class="dt">to_upper_bound =</span> <span class="st">&quot;grey25&quot;</span>,
      <span class="dt">edge_attr_to =</span> <span class="st">&quot;color&quot;</span>)

<span class="co"># Display the graph with newly grayed edges</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_grey_edges)</code></pre></div>
<div id="htmlwidget-e463dea518e87e2c689c" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-e463dea518e87e2c689c">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", color = \"lightgreen\", shape = \"circle\", width = \"0.64\", height = \"0.64\"] \n  \"2\" [label = \"2\", color = \"lightgreen\", shape = \"circle\", width = \"1.184\", height = \"1.184\"] \n  \"3\" [label = \"3\", color = \"lightgreen\", shape = \"rectangle\", width = \"1.5\", height = \"1.5\"] \n  \"4\" [label = \"4\", color = \"lightgreen\", shape = \"rectangle\", width = \"0.5\", height = \"0.5\"] \n\"1\"->\"2\" [id = \"1\", penwidth = \"2.5\", color = \"#D9D9D9\"] \n\"4\"->\"1\" [id = \"2\", penwidth = \"0.5\", color = \"#404040\"] \n\"3\"->\"1\" [id = \"3\", penwidth = \"1\", color = \"#7F7F7F\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="setting-attributes-globally-or-selectively" class="section level2">
<h2><span class="header-section-number">3.3</span> Setting Attributes Globally or Selectively</h2>
<p>We can set node or edge attribute values for all nodes or edges in a graph, or, for specific nodes or edges in a graph. These additions can be done with the <code>set_node_attrs()</code> and <code>set_edge_attrs()</code> functions. Letâ€™s create a random graph with 10 nodes and 15 edges and color some nodes and edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a random graph and set the</span>
<span class="co"># `fillcolor` as `lightgreen` for all</span>
<span class="co"># nodes in the graph, and, set `color`</span>
<span class="co"># as `blue` for all graph edges</span>
graph_1 &lt;-
<span class="st">  </span><span class="kw">create_random_graph</span>(
    <span class="dt">n =</span> <span class="dv">10</span>,
    <span class="dt">m =</span> <span class="dv">15</span>,
    <span class="dt">directed =</span> <span class="ot">TRUE</span>,
    <span class="dt">set_seed =</span> <span class="dv">23</span>) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;lightgreen&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;blue&quot;</span>)

<span class="co"># Display the blue and green graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_1)</code></pre></div>
<div id="htmlwidget-ae842f3ea5d9d32122e7" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-ae842f3ea5d9d32122e7">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"lightgreen\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"blue\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"blue\"] \n\"2\"->\"7\" [id = \"4\", color = \"blue\"] \n\"5\"->\"10\" [id = \"5\", color = \"blue\"] \n\"1\"->\"7\" [id = \"6\", color = \"blue\"] \n\"3\"->\"7\" [id = \"7\", color = \"blue\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"blue\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"blue\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"blue\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<p>We can be more selective with the node and edge coloring (or with any other attributes or data we would like to apply).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set attribute `fillcolor` as `orange`</span>
<span class="co"># for nodes `1` and `3` in the graph;</span>
<span class="co"># for edges, set `color` to `red` for</span>
<span class="co"># all those edges leading to nodes</span>
<span class="co"># `7` and `10`</span>
graph_2 &lt;-
<span class="st">  </span>graph_1 %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;orange&quot;</span>,
    <span class="dt">nodes =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">values =</span> <span class="st">&quot;red&quot;</span>, 
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">10</span>))

<span class="co"># Display that multicolored graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_2)</code></pre></div>
<div id="htmlwidget-bf8c0f1ad6423a30fb7a" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-bf8c0f1ad6423a30fb7a">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"orange\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"orange\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"red\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"red\"] \n\"2\"->\"7\" [id = \"4\", color = \"red\"] \n\"5\"->\"10\" [id = \"5\", color = \"red\"] \n\"1\"->\"7\" [id = \"6\", color = \"red\"] \n\"3\"->\"7\" [id = \"7\", color = \"red\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"blue\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"red\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"blue\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<p>Finally, individual edges can be targeted if supplying vectors for both the <code>from</code> and <code>to</code> arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set attribute `color = &quot;green&quot;` for edges</span>
<span class="co"># `1`-&gt;`4` and `3`-&gt;`1` using the edge</span>
<span class="co"># data frame</span>
graph_3 &lt;-
<span class="st">  </span>graph_2 %&gt;%
<span class="st">    </span><span class="kw">set_edge_attrs</span>(
      <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
      <span class="dt">values =</span> <span class="st">&quot;black&quot;</span>,
      <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">1</span>),
      <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">6</span>))

<span class="co"># Display the graph</span>
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_3)</code></pre></div>
<div id="htmlwidget-3fa33bfedb903c048773" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-3fa33bfedb903c048773">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"orange\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"orange\"] \n  \"4\" [label = \"4\", fillcolor = \"lightgreen\"] \n  \"5\" [label = \"5\", fillcolor = \"lightgreen\"] \n  \"6\" [label = \"6\", fillcolor = \"lightgreen\"] \n  \"7\" [label = \"7\", fillcolor = \"lightgreen\"] \n  \"8\" [label = \"8\", fillcolor = \"lightgreen\"] \n  \"9\" [label = \"9\", fillcolor = \"lightgreen\"] \n  \"10\" [label = \"10\", fillcolor = \"lightgreen\"] \n\"6\"->\"10\" [id = \"1\", color = \"red\"] \n\"5\"->\"6\" [id = \"2\", color = \"blue\"] \n\"2\"->\"10\" [id = \"3\", color = \"red\"] \n\"2\"->\"7\" [id = \"4\", color = \"red\"] \n\"5\"->\"10\" [id = \"5\", color = \"red\"] \n\"1\"->\"7\" [id = \"6\", color = \"red\"] \n\"3\"->\"7\" [id = \"7\", color = \"red\"] \n\"3\"->\"9\" [id = \"8\", color = \"blue\"] \n\"7\"->\"9\" [id = \"9\", color = \"black\"] \n\"6\"->\"9\" [id = \"10\", color = \"blue\"] \n\"9\"->\"10\" [id = \"11\", color = \"red\"] \n\"2\"->\"3\" [id = \"12\", color = \"blue\"] \n\"1\"->\"6\" [id = \"13\", color = \"black\"] \n\"4\"->\"6\" [id = \"14\", color = \"blue\"] \n\"2\"->\"5\" [id = \"15\", color = \"blue\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="adding-attributes-to-selections-of-nodes-or-edges" class="section level2">
<h2><span class="header-section-number">3.4</span> Adding Attributes to Selections of Nodes or Edges</h2>
<p>There is a large number of functions that store either a selection of nodes or edges within the graph object. Such functions begin with <code>select_...</code> and <code>trav_...</code>. Complementing this class of functions are functions that take a graph with an active selection and perform some transformation based on the selection of nodes or edges. These functions are identifiable by ending with <code>...ws</code> (with selection). Weâ€™ll devote two entire chapters on the <code>select...()</code> and <code>trav...()</code> functions but, for now, weâ€™ll provide simple use cases with <code>select_nodes()</code> and <code>select_edges()</code>.</p>
<p>So, we can make a selection of nodes or edges (but not both at the same time), how do we style these groups? We can do it with the <code>set_node_attrs_ws()</code> and <code>set_edge_attrs_ws()</code> functions. In this example, letâ€™s make a simple graph, select 2 of the 4 nodes, add <code>fillcolor</code> attribute values of <code>lightgreen</code> for those nodes, and then clear the selection with <code>clear_selection()</code> (it clears any selection of nodes or edges).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a simple graph, select nodes</span>
<span class="co"># `1` and `2`, color them light green;</span>
<span class="co"># clear the selection</span>
graph_4 &lt;-
<span class="st">  </span><span class="kw">create_graph</span>() %&gt;%
<span class="st">  </span><span class="kw">add_path</span>(<span class="dv">4</span>) %&gt;%
<span class="st">  </span><span class="kw">select_nodes</span>(
    <span class="dt">nodes =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_node_attrs_ws</span>(
    <span class="dt">node_attr =</span> <span class="st">&quot;fillcolor&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;lightgreen&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">clear_selection</span>()
  
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_4)</code></pre></div>
<div id="htmlwidget-4299cab1aa427c3b7e3a" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-4299cab1aa427c3b7e3a">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"\"] \n  \"4\" [label = \"4\", fillcolor = \"\"] \n\"1\"->\"2\" [id = \"1\"] \n\"2\"->\"3\" [id = \"2\"] \n\"3\"->\"4\" [id = \"3\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Take `graph_4`, select edges</span>
<span class="co"># `1-&gt;2` and `2-&gt;3`, color those red and</span>
<span class="co"># then clear the selection</span>
graph_5 &lt;-
<span class="st">  </span>graph_4 %&gt;%
<span class="st">  </span><span class="kw">select_edges</span>(
    <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),
    <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)) %&gt;%
<span class="st">  </span><span class="kw">set_edge_attrs_ws</span>(
    <span class="dt">edge_attr =</span> <span class="st">&quot;color&quot;</span>,
    <span class="dt">value =</span> <span class="st">&quot;red&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">clear_selection</span>()
  
<span class="kw">render_graph</span>(<span class="dt">graph =</span> graph_5)</code></pre></div>
<div id="htmlwidget-aed4d0bd3cd0c4e211af" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-aed4d0bd3cd0c4e211af">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\"]\n\nnode [fontname = \"Helvetica\",\n     fontsize = \"10\",\n     shape = \"circle\",\n     fixedsize = \"true\",\n     width = \"0.5\",\n     style = \"filled\",\n     fillcolor = \"aliceblue\",\n     color = \"gray70\",\n     fontcolor = \"gray50\"]\n\nedge [len = \"1.5\",\n     color = \"gray40\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"1\", fillcolor = \"lightgreen\"] \n  \"2\" [label = \"2\", fillcolor = \"lightgreen\"] \n  \"3\" [label = \"3\", fillcolor = \"\"] \n  \"4\" [label = \"4\", fillcolor = \"\"] \n\"1\"->\"2\" [id = \"1\", color = \"red\"] \n\"2\"->\"3\" [id = \"2\", color = \"red\"] \n\"3\"->\"4\" [id = \"3\", id = \"3\"] \n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creation.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>


<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
